<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Advanced Expense Tracker</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-image: url('images/download.jpg');
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding-top: 50px;
        }
        .container {
            background-color: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 450px;
            backdrop-filter: blur(8px);
        }
        h1 {
            text-align: center;
            color: #333;
        }
        .balance-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            text-align: center;
        }
        .balance-box {
            flex: 1;
            padding: 15px;
            border-radius: 8px;
            margin: 0 5px;
            background-color: #f0f0f0;
        }
        .balance-box h2 {
            margin: 0 0 5px;
            color: #555;
            font-size: 1em;
        }
        .balance-box #income-amount {
            font-size: 1.5em;
            font-weight: bold;
            color: #28a745;
        }
        .balance-box #expenses-amount {
            font-size: 1.5em;
            font-weight: bold;
            color: #dc3545;
        }
        #balance-amount {
            font-size: 2.5em;
            font-weight: bold;
            color: #28a745;
            text-align: center;
            margin-bottom: 20px;
        }
        #balance-amount.negative {
            color: #dc3545;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            color: #555;
        }
        /* Make only the Description label bold and white */
        label[for="transaction-text"] {
            font-weight: bold;
            color: white;
        }
        input[type="text"],
        input[type="number"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
        }
        button {
            width: 100%;
            padding: 10px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1em;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #0056b3;
        }
        .progress-bar {
            width: 100%;
            height: 15px;
            background-color: #dc3545;
            border-radius: 8px;
            overflow: hidden;
            margin-top: 20px;
        }
        .progress-bar-income {
            height: 100%;
            background-color: #28a745;
            transition: width 0.5s ease-in-out;
        }
        .view-transactions-link {
            display: block;
            text-align: center;
            margin-top: 20px;
            text-decoration: none;
            color: #007bff;
            font-weight: bold;
            transition: color 0.3s;
        }
        .view-transactions-link:hover {
            color: #0056b3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Expense Tracker</h1>

        <div class="balance-container">
            <div class="balance-box">
                <h2>Income</h2>
                <p id="income-amount">$0.00</p>
            </div>
            <div class="balance-box">
                <h2>Expenses</h2>
                <p id="expenses-amount">$0.00</p>
            </div>
        </div>

        <div class="progress-bar">
            <div class="progress-bar-income" style="width: 0%;"></div>
        </div>

        <h2 style="text-align:center;">Current Balance</h2>
        <p id="balance-amount">$0.00</p>

        <form id="transaction-form">
            <h2>Add New Transaction</h2>
            <div class="form-group">
                <label for="transaction-text">Description</label>
                <input type="text" id="transaction-text" placeholder="Enter text..." required />
            </div>
            <div class="form-group">
                <label for="transaction-amount">Amount <br>(positive for income, negative for expense)</label>
                <input type="number" id="transaction-amount" placeholder="Enter amount..." required />
            </div>
            <button type="submit">Add Transaction</button>
        </form>

        <a href="transactions.html" class="view-transactions-link">
            View All Transactions â†’
        </a>
    </div>

    <script>
        const balance = document.getElementById('balance-amount');
        const form = document.getElementById('transaction-form');
        const text = document.getElementById('transaction-text');
        const amount = document.getElementById('transaction-amount');
        const incomeAmount = document.getElementById('income-amount');
        const expensesAmount = document.getElementById('expenses-amount');
        const progressBar = document.querySelector('.progress-bar-income');

        let transactions = JSON.parse(localStorage.getItem('transactions')) || [];

        function init() {
            updateUI();
        }

        function saveTransactions() {
            localStorage.setItem('transactions', JSON.stringify(transactions));
        }

        function addTransaction(e) {
            e.preventDefault();
            const transaction = {
                id: Date.now(),
                text: text.value,
                amount: +amount.value
            };
            transactions.push(transaction);
            saveTransactions();
            updateUI();
            text.value = '';
            amount.value = '';
        }

        function updateUI() {
            const incomeTotal = transactions
                .filter(t => t.amount > 0)
                .reduce((acc, t) => acc + t.amount, 0);

            const expensesTotal = transactions
                .filter(t => t.amount < 0)
                .reduce((acc, t) => acc + t.amount, 0) * -1;

            incomeAmount.innerText = `$${incomeTotal.toFixed(2)}`;
            expensesAmount.innerText = `$${expensesTotal.toFixed(2)}`;

            const total = transactions.reduce((acc, t) => acc + t.amount, 0);
            balance.innerText = `$${total.toFixed(2)}`;

            if (total < 0) {
                balance.classList.add('negative');
            } else {
                balance.classList.remove('negative');
            }

            const totalTransactions = incomeTotal + expensesTotal;
            let incomePercentage = 0;
            if (totalTransactions > 0) {
                incomePercentage = (incomeTotal / totalTransactions) * 100;
            }
            progressBar.style.width = `${incomePercentage}%`;
        }

        form.addEventListener('submit', addTransaction);

        init();
    </script>
</body>
</html>
